# 游戏编程架构系统学习路线图（PICO-8 → 3A 通用）

## 在线阅读
https://gpp.tkchu.me/
> 生成日期：2025-09-13  
> 作者：Kimi（Moonshot AI）

## 使用方式
1. 每阶段先**用 PICO-8 手写**一个 ≤7 天的可玩原型  
2. 再**用任意引擎复刻**一次，对比两种尺度下的实现差异  
3. 每完成一步写 200 字笔记：解决了什么耦合？如果内存减半怎么砍？

---

## 阶段 1　数据驱动 / 表驱动
目标：把行为从 if-else 拆成“表”  
核心概念：系统注册、实体池、组件标签、热插拔开关  
PICO-8 项目：  
- ① 给现有 demo 加 5 个可开关系统（玩家、敌人、子弹、碰撞、粒子）  
- ② 用 `_menuitem()` 做运行时开关菜单  

进阶阅读：  
- 《Game Programming Patterns》第 5 章「Data Locality」  
- 参考：Celeste PICO-8 版 `objects.lua`

---

## 阶段 2　最小 ECS（实体-组件-系统）
目标：组合优于继承，组件纯数据、系统纯行为  
PICO-8 项目：  
- ① 组件表：`position`、`velocity`、`sprite`、`lifetime`  
- ② 系统表：`movement_sys`、`render_sys`、`lifetime_sys`  
- ③ Entity 仅数字 ID，组件按 ID 索引  
- ④ 子弹冷却：带 `lifetime` 的实体自动回收  

进阶阅读：  
- ECS FAQ（Adam Martin）  
- TinyECS（Lua 150 行实现）

---

## 阶段 3　消息队列 & 命令模式
目标：解耦「谁发事件」与「谁响应」  
PICO-8 项目：  
- ① 输入封装成 `Command` 表，先写队列再消费  
- ② 实现 30 帧回放：序列化 → 存储 → 重播  

进阶阅读：  
- 《Game Programming Patterns》第 3 章「Command」  
- 参考：SNES《洛克人》TAS 工具

---

## 阶段 4　状态机 & 行为树
目标：AI 从随机乱走 → 可调试  
PICO-8 项目：  
- ① 敌人 FSM：`idle` → `chase` → `cooldown`，表驱动转换  
- ② 升级行为树：Selector / Sequence / Leaf，实现“看到玩家→追→攻击→逃跑”  

进阶阅读：  
- 《Behavior Trees in Robotics and AI》前 40 页  
- Godot Behave 插件源码

---

## 阶段 5　帧同步、快照与回放
目标：确定性模拟 + 输入回滚，为多人同步打基础  
PICO-8 项目：  
- ① 确定性随机种子，同样输入 → 同样结果  
- ② 每 60 帧 `serialize_world()` 存哈希，随时回档  

进阶阅读：  
- GDC《1500 Archers on a 28.8》演讲  
- GGPO 源码（2k 行 C，核心思想可移植 Lua）

---

## 免费资源大包
| 类型 | 名称/链接 | 语言 |
|---|---|---|
| 书籍 | 《Game Programming Patterns》中译开源版 | 中文 |
| 书籍 | 《游戏引擎架构（第 3 版）》第 14-16 章 | 中文 |
| 视频 | B 站搜索「ECS PICO-8」系列 | 中文 |
| 视频 | GDC 中国《守望先锋》ECS 演讲（中文字幕） | 中文 |
| 源码 | TinyECS、Love2D-ECS、Godot-ecs（Star<1k） | Lua/C# |

---

## 下一步行动
1. 从阶段 2 开始，用当前 demo 练手最小 ECS  
2. 遇到「组件放哪、系统顺序」问题，随时 @Kimi 现场拆代币

祝编码愉快！
